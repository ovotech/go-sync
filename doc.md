<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# github

```go
import "github.com/ovotech/go-sync/pkg/github"
```

Package github provides services for synchronising GitHub resources.

## Index

- [Variables](<#variables>)
- [type Saml](<#type-saml>)
  - [func NewSamlDiscoveryService(client *githubv4.Client, org string) *Saml](<#func-newsamldiscoveryservice>)
  - [func (s *Saml) GetEmailFromUsername(logins ...string) ([]string, error)](<#func-saml-getemailfromusername>)
  - [func (s *Saml) GetUsernameFromEmail(emails ...string) ([]string, error)](<#func-saml-getusernamefromemail>)
- [type Team](<#type-team>)
  - [func NewTeamSyncService(client *github.Client, discovery ports.Discovery, org string, slug string) *Team](<#func-newteamsyncservice>)
  - [func (t *Team) Add(emails ...string) ([]string, []error, error)](<#func-team-add>)
  - [func (t *Team) Get() ([]string, error)](<#func-team-get>)
  - [func (t *Team) Remove(emails ...string) ([]string, []error, error)](<#func-team-remove>)


## Variables

ErrUserNotFound is returned when the SAML \-\> GitHub username mapping cannot be found.

```go
var ErrUserNotFound = errors.New("user_not_found")
```

## type Saml

```go
type Saml struct {
    // contains filtered or unexported fields
}
```

### func NewSamlDiscoveryService

```go
func NewSamlDiscoveryService(client *githubv4.Client, org string) *Saml
```

NewSamlDiscoveryService instantiates a new GitHub SAML discovery service.

### func \(\*Saml\) GetEmailFromUsername

```go
func (s *Saml) GetEmailFromUsername(logins ...string) ([]string, error)
```

GetEmailFromUsername takes a list of GitHub usernames, and returns a list of emails.

### func \(\*Saml\) GetUsernameFromEmail

```go
func (s *Saml) GetUsernameFromEmail(emails ...string) ([]string, error)
```

GetUsernameFromEmail takes a list of email addresses, and returns a list of equivalent GitHub usernames.

## type Team

```go
type Team struct {
    // contains filtered or unexported fields
}
```

### func NewTeamSyncService

```go
func NewTeamSyncService(client *github.Client, discovery ports.Discovery, org string, slug string) *Team
```

NewTeamSyncService instantiates a new GitHub Team service.

### func \(\*Team\) Add

```go
func (t *Team) Add(emails ...string) ([]string, []error, error)
```

### func \(\*Team\) Get

```go
func (t *Team) Get() ([]string, error)
```

### func \(\*Team\) Remove

```go
func (t *Team) Remove(emails ...string) ([]string, []error, error)
```

# slack

```go
import "github.com/ovotech/go-sync/pkg/slack"
```

Package github provides services for synchronising Slack resources.

## Index

- [type Conversation](<#type-conversation>)
  - [func NewConversationService(client *slack.Client, channelName string) *Conversation](<#func-newconversationservice>)
  - [func (c *Conversation) Add(emails ...string) ([]string, []error, error)](<#func-conversation-add>)
  - [func (c *Conversation) Get() ([]string, error)](<#func-conversation-get>)
  - [func (c *Conversation) Remove(emails ...string) ([]string, []error, error)](<#func-conversation-remove>)
- [type UserGroup](<#type-usergroup>)
  - [func NewUserGroupService(slackClient *slack.Client, userGroup string) *UserGroup](<#func-newusergroupservice>)
  - [func (u *UserGroup) Add(emails ...string) ([]string, []error, error)](<#func-usergroup-add>)
  - [func (u *UserGroup) Get() ([]string, error)](<#func-usergroup-get>)
  - [func (u *UserGroup) Remove(emails ...string) ([]string, []error, error)](<#func-usergroup-remove>)


## type Conversation

```go
type Conversation struct {
    // contains filtered or unexported fields
}
```

### func NewConversationService

```go
func NewConversationService(client *slack.Client, channelName string) *Conversation
```

NewConversationService instantiates a new Slack conversation service.

### func \(\*Conversation\) Add

```go
func (c *Conversation) Add(emails ...string) ([]string, []error, error)
```

Add adds an email to a conversation.

### func \(\*Conversation\) Get

```go
func (c *Conversation) Get() ([]string, error)
```

Get gets a list of emails from a Slack channel.

### func \(\*Conversation\) Remove

```go
func (c *Conversation) Remove(emails ...string) ([]string, []error, error)
```

Remove removes email addresses from a conversation.

## type UserGroup

```go
type UserGroup struct {
    // contains filtered or unexported fields
}
```

### func NewUserGroupService

```go
func NewUserGroupService(slackClient *slack.Client, userGroup string) *UserGroup
```

NewUserGroupService instantiates a new Slack UserGroup service.

### func \(\*UserGroup\) Add

```go
func (u *UserGroup) Add(emails ...string) ([]string, []error, error)
```

Add a list of emails to a Slack UserGroup. Since the Slack API takes all of this as a single request, it either returns a full list of successful emails, or an error.

### func \(\*UserGroup\) Get

```go
func (u *UserGroup) Get() ([]string, error)
```

Get a list of email addresses in a Slack User Group.

### func \(\*UserGroup\) Remove

```go
func (u *UserGroup) Remove(emails ...string) ([]string, []error, error)
```

Remove a list of email addresses from a Slack UserGroup.

# ports

```go
import "github.com/ovotech/go-sync/pkg/core/ports"
```

Package ports lists the types of ports expected from Sync's standard services.

## Index

- [type Discovery](<#type-discovery>)
- [type Service](<#type-service>)


## type Discovery

Discovery interfaces are intended to be used when there's multiple methods of converting an email to a service ID, and back.

```go
type Discovery interface {
    GetUsernameFromEmail(...string) ([]string, error)
    GetEmailFromUsername(...string) ([]string, error)
}
```

## type Service

Service interfaces are used to allow Sync to communicate with third party services.

```go
type Service interface {
    Get() ([]string, error)                                          // Get users in a service.
    Add(...string) (success []string, failure []error, err error)    // Add users to a service.
    Remove(...string) (success []string, failure []error, err error) // Remove users from a service.
}
```

# sync

```go
import "github.com/ovotech/go-sync/pkg/core/sync"
```

Package sync provides a way to synchronise membership of arbitrary services.

## Index

- [type Sync](<#type-sync>)
  - [func New(source ports.Service) *Sync](<#func-new>)
  - [func (s *Sync) SetAddRemove(add bool, remove bool)](<#func-sync-setaddremove>)
  - [func (s *Sync) SetDryRun(dryRun bool)](<#func-sync-setdryrun>)
  - [func (s *Sync) SyncWith(service ports.Service) ([]string, []error, error)](<#func-sync-syncwith>)


## type Sync

```go
type Sync struct {
    // contains filtered or unexported fields
}
```

### func New

```go
func New(source ports.Service) *Sync
```

New creates a new Sync service.

### func \(\*Sync\) SetAddRemove

```go
func (s *Sync) SetAddRemove(add bool, remove bool)
```

SetAddRemove can be used to selectively enable/disable the add or remove functionality.

### func \(\*Sync\) SetDryRun

```go
func (s *Sync) SetDryRun(dryRun bool)
```

SetDryRun can be used to enable dry\-run mode \(default: disabled\). In dry\-run mode, accounts will be enumerated but will not add/remove accounts.

### func \(\*Sync\) SyncWith

```go
func (s *Sync) SyncWith(service ports.Service) ([]string, []error, error)
```

SyncWith synchronises the requested service with the source service, adding & removing members. Returns a list of successful Sync, a list of errors, and a general error for critical failures.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
